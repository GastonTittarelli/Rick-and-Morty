<div class="login-container">
  <div
    *ngIf="alert$ | async as alert"
    class="alert alert-message"
    [ngClass]="'alert-' + alert.type"
  >
    {{ alert.text }}
  </div>

  <section class="image-container">
    <img
      src="/loginImageView.png"
      alt="Imagen de inicio de sesiÃ³n de Rick & Morty"
    />
  </section>

  <section class="form-container">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label text-primary"
          >Email address</label
        >
        <input
          type="email"
          class="form-control"
          id="exampleInputEmail1"
          formControlName="mail"
          placeholder="email@example.com"
        />

        <div class="text-danger small" style="min-height: 1.5em">
          <div
            *ngIf="loginForm.get('mail')?.touched && loginForm.get('mail')?.errors?.['required']"
          >
            Email is required
          </div>
          <div
            *ngIf="loginForm.get('mail')?.touched && loginForm.get('mail')?.errors?.['email']"
          >
            Email is not valid
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label text-primary"
          >Password</label
        >
        <input
          type="password"
          class="form-control"
          id="exampleInputPassword1"
          formControlName="password"
          placeholder="Password"
        />

        <div class="text-danger small" style="min-height: 3em">
          <div
            *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.errors?.['required']"
          >
            Password is required
          </div>
          <div
            *ngIf="loginForm.get('password')?.touched && 
              (loginForm.get('password')?.errors?.['minlength'] || 
              loginForm.get('password')?.errors?.['pattern'])"
          >
            Password must be at least 6 characters long and include a letter and a number
          </div>
        </div>

      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="exampleCheck1" />
        <label class="form-check-label" for="exampleCheck1">Remember me</label>
      </div>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="loginForm.invalid"
      >
        Sign in
      </button>
      <hr />
      <div class="mt-3 d-flex small auth-secondary-options">
        <a [routerLink]="'/layout/register'" class="text-primary"
          >New around here? Sign up</a
        >
        <a class="text-primary">Forgot password?</a>
      </div>

      <div *ngIf="errorMessage" class="text-danger mt-2">
        {{ errorMessage }}
      </div>
    </form>
  </section>
</div>
